<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All categories</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/main.css}" media="all">
</head>
<body>
    <div class="page-wrapper bg-gra-03 p-t-45 p-b-50">
        <div class="wrapper wrapper--w790">
            <div class="card card-5" style="width: fit-content">
                <div class="card-heading">
                    <h2 class="title">All categories of household expenses</h2>
                </div>
                <div class="card-body">
                    <table class="table table-dark table-striped">
                        <thead class="thead-dark">
                        <tr>
                            <th>Creation Date</th>
                            <th>Category Name</th>
                            <th>Edit</th>
                            <th>Delete</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="category : ${categories}">
                            <td th:text="${#temporals.format(category.creationDateTime, 'dd-MM-yyyy HH:mm')}"></td>
                            <td th:text="${category.categoryName}"></td>
                            <td>
                                <a class="btn btn-sm btn-success" th:href="@{'/category/edit/' + ${category.id}}">
                                    Edit
                                </a>
                            </td>
                            <td>
                                <a type="button" id="catDeleteButton" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal"
                                   th:href="@{'/category/delete/' + ${category.id}}">
                                Delete
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                        <a class="btn btn--radius-2 btn--green" href="#" th:href="@{/category/add}" role="button" th:align="left">
                            Add new category
                        </a>
                        <a class="btn btn--radius-2 btn--red" href="#" th:href="@{/home}" role="button" th:align="center">
                            Main page
                        </a>
                </div>
            </div>
        </div>
    </div>
    <div id="deleteModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete confirmation</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h2>Do you really want to delete ?</h2>
                    <!--<h2 th:text="${categoryToAsk.categoryName} + '?'">category</h2>-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" th:href="@{/category/all}">Close</button>
<!--                    <button type="button" class="btn btn-primary" th:href="@{'/category/delete/' + ${categoryToAsk.id}}">Delete</button>-->
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript">
    jQuery(document).ready(function() {
            $('.table #catDeleteButton').on('click', function(event) {
                jQuery.noConflict();
                $('#deleteModal').modal('show');
                event.preventDefault();
            });
        });
</script>
</body>
</html>